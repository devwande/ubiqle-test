<section class="hero" role="banner" aria-labelledby="hero-heading">
  <div class="container">
    <header class="hero__headline">
      <h1 class="hero__title" id="hero-heading">
        <span class="hero__dense">DENSE</span> 
        <span class="hero__dot" aria-hidden="true">.</span> 
        <span class="hero__pxi">PXI</span>
      </h1>
    </header>
    <div class="hero__media">
      <!-- Vertical label on the left -->
      <div class="hero__label">
        <span>Nike product of the year</span>
      </div>
      
      <!-- Main product image -->
      <div class="hero__image">
        {% if section.settings.hero_image != blank %}
          <img 
            src="{{ section.settings.hero_image | image_url: width: 800, format: 'webp' }}" 
            srcset="
              {{ section.settings.hero_image | image_url: width: 480, format: 'webp' }} 480w,
              {{ section.settings.hero_image | image_url: width: 800, format: 'webp' }} 800w,
              {{ section.settings.hero_image | image_url: width: 1200, format: 'webp' }} 1200w,
              {{ section.settings.hero_image | image_url: width: 1600, format: 'webp' }} 1600w
            "
            sizes="(max-width: 768px) 100vw, 1600px"
            alt="{{ section.settings.hero_heading | escape }}" 
            width="1600" 
            height="700" 
            loading="eager" 
            fetchpriority="high"
            decoding="async"
            class="hero__img"
          />
        {% else %}
          <img 
            src="{{ 'NikeAir.svg' | asset_url }}"
            alt="Hero image placeholder" 
            width="1600" 
            height="700" 
            loading="eager" 
            fetchpriority="high"
            decoding="async"
            class="hero__img"
          />
        {% endif %}
      </div>
      
      <!-- Product copy overlay -->
      <div class="hero__copy">
        <h2 class="hero__product">{{ section.settings.hero_heading | default: 'NIKE AIR MAX' }}</h2>
        <p class="hero__subtitle">{{ section.settings.hero_subtitle | default: 'Nike introducing the new air max for everyones comfort' }}</p>
        {% if section.settings.hero_cta_link != blank %}
          <a class="btn btn--primary hero__cta" href="{{ section.settings.hero_cta_link }}" aria-label="{{ section.settings.hero_cta_label | default: 'Shop now' }} - {{ section.settings.hero_heading | default: 'NIKE AIR MAX' }}">
            {{ section.settings.hero_cta_label | default: 'Shop now' }}
          </a>
        {% else %}
          <span class="btn btn--primary hero__cta btn--disabled" role="button" aria-disabled="true">
            {{ section.settings.hero_cta_label | default: 'Shop now' }}
          </span>
        {% endif %}
      </div>
      
      <!-- Thumbnail images on the right -->
      <div class="hero__thumbnails">
          <img src="{{ 'Placeholder1.svg' | asset_url }}" alt="Product thumbnail 1" loading="lazy" width="100" height="100" />
          <img src="{{ 'Placeholder2.svg' | asset_url }}" alt="Product thumbnail 2" loading="lazy" width="100" height="100"/>
      </div>
      
      <!-- Slider indicators -->
      <div class="hero__indicators">
        <span class="hero__dot active"></span>
        <span class="hero__dot"></span>
        <span class="hero__dot"></span>
      </div>
    </div>
  </div>

<script>
// filepath: /Users/user/Developer/Ubiqle/sections/banner.liquid
document.addEventListener("DOMContentLoaded", function () {
  const track = document.createElement("div");
  track.classList.add("hero__track");

  const heroImage = document.querySelector(".hero__image img");
  const heroImageContainer = document.querySelector(".hero__image");

  // Create main product image slide
  const mainSlide = document.createElement("div");
  mainSlide.classList.add("hero__slide");
  mainSlide.appendChild(heroImage.cloneNode(true));
  track.appendChild(mainSlide);

  // Create slides with Nike2.jpeg and Nike3.jpeg (with contrast)
  const nikeImages = [
    '{{ "Nike2.jpeg" | asset_url }}',
    '{{ "Nike3.jpeg" | asset_url }}'
  ];
  
  nikeImages.forEach((imageUrl, i) => {
    const slide = document.createElement("div");
    slide.classList.add("hero__slide");
    const img = document.createElement("img");
    img.src = imageUrl;
    img.alt = `Nike product image ${i+1}`;
    img.width = 1600;
    img.height = 700;
    img.loading = "lazy"; 
    img.decoding = "async";
    img.className = "hero__img hero__img--contrast"; // add contrast class
    slide.appendChild(img);
    track.appendChild(slide);
  });

  // Replace hero__image contents with track
  heroImageContainer.innerHTML = "";
  heroImageContainer.appendChild(track);

  const slides = Array.from(track.children);
  const dots = document.querySelectorAll(".hero__indicators .hero__dot");

  let currentIndex = 0;
  let startX = 0;
  let currentX = 0;
  let isDragging = false;

  function updateCarousel(index) {
    currentIndex = index;
    track.style.transform = `translateX(-${index * 100}%)`;
    dots.forEach((dot, i) => {
      dot.classList.toggle("active", i === index);
      dot.setAttribute("aria-selected", i === index ? "true" : "false");
    });
  }

  function nextSlide() {
    if (currentIndex < slides.length - 1) {
      updateCarousel(currentIndex + 1);
    } else {
      updateCarousel(0);
    }
  }

  function prevSlide() {
    if (currentIndex > 0) {
      updateCarousel(currentIndex - 1);
    } else {
      updateCarousel(slides.length - 1);
    }
  }

  dots.forEach((dot, index) => {
    dot.addEventListener("click", () => {
      updateCarousel(index);
    });
  });

  track.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
    isDragging = true;
  });

  track.addEventListener("touchmove", (e) => {
    if (!isDragging) return;
    currentX = e.touches[0].clientX;
  });

  track.addEventListener("touchend", () => {
    if (!isDragging) return;
    const deltaX = startX - currentX;
    if (deltaX > 50) {
      nextSlide();
    } else if (deltaX < -50) {
      prevSlide();
    }
    isDragging = false;
  });

  // Optional arrows for desktop
  const prevBtn = document.createElement("button");
  prevBtn.classList.add("hero__arrow", "hero__arrow--prev");
  prevBtn.setAttribute("aria-label", "Previous Slide");
  prevBtn.innerHTML = "&#10094;";

  const nextBtn = document.createElement("button");
  nextBtn.classList.add("hero__arrow", "hero__arrow--next");
  nextBtn.setAttribute("aria-label", "Next Slide");
  nextBtn.innerHTML = "&#10095;";

  heroImageContainer.appendChild(prevBtn);
  heroImageContainer.appendChild(nextBtn);

  prevBtn.addEventListener("click", prevSlide);
  nextBtn.addEventListener("click", nextSlide);

  updateCarousel(0);
});
</script>

<style>
/* Contrast filter for bright images */
.hero__img--contrast {
  filter: contrast(1.5) brightness(0.7);
}
</style>
</section>

{% schema %}
{
  "name": "Hero Banner",
  "tag": "section",
  "class": "section-hero",
  "settings": [
    {
      "type": "header",
      "content": "Content Settings"
    },
    {
      "type": "text",
      "id": "hero_heading",
      "label": "Product Heading",
      "default": "NIKE AIR MAX",
      "info": "Main product title displayed on the hero banner"
    },
    {
      "type": "textarea",
      "id": "hero_subtitle",
      "label": "Subtitle",
      "default": "Nike introducing the new air max for everyone's comfort",
      "info": "Brief description displayed below the heading"
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "text",
      "id": "hero_cta_label",
      "label": "Button Text",
      "default": "Shop now",
      "info": "Text displayed on the call-to-action button"
    },
    {
      "type": "url",
      "id": "hero_cta_link",
      "label": "Button Link",
      "info": "URL the button should link to"
    },
    {
      "type": "header",
      "content": "Visual Settings"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image",
      "info": "Recommended size: 1600x700px for optimal display"
    }
  ],
  "presets": [
    {
      "name": "Hero Banner",
      "settings": {
        "hero_heading": "NIKE AIR MAX",
        "hero_subtitle": "Nike introducing the new air max for everyone's comfort",
        "hero_cta_label": "Shop now"
      }
    }
  ]
}
{% endschema %}
