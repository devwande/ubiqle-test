<section class="top-header" role="img" aria-label="Site header banner">
  <div class="top-header__nav">
    <div class="top-header__box">
      {% if section.settings.header_image != blank %}
        <div class="top-header__nav">
          <div class="nav-left desktop-links">
            <p>New Drops ðŸ”¥</p>
            <p>Men</p>
            <p>Women</p>
          </div>

          <div class="brand">
            <img src="{{ 'Logo.svg' | asset_url }}" alt="KICKS" width="" height="">
          </div>

          <div class="top-header__search desktop-actions">
            <button id="searchToggle" class="search-toggle" aria-expanded="false" aria-controls="headerSearch" aria-label="Open search">
              <img src="{{ 'Search.svg' | asset_url }}" alt="Search" width="20" height="20"/>
            </button>
            <form id="headerSearch" class="search-bar" action="/search" method="get" role="search" aria-hidden="true">
              <input type="search" name="q" placeholder="Search products" class="search-input" />
            </form>
            <img src="{{ 'Profile.svg' | asset_url }}" alt="Profile" width="20" height="20">
            <img src="{{ 'User.svg' | asset_url }}" alt="User" width="20" height="20">
            <button id="menuToggle" class="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
              <span></span><span></span><span></span>
            </button>
          </div>
          
          <!-- Mobile Header Layout: Search | Logo | Hamburger -->
          <div class="mobile-header">
            <button id="searchToggleMobileHeader" class="search-toggle mobile-search-btn" aria-expanded="false" aria-controls="headerSearchMobileHeader" aria-label="Open search">
              <img src="{{ 'Search.svg' | asset_url }}" alt="Search" width="20" height="20"/>
            </button>
            
            <div class="brand mobile-brand">
              <img src="{{ 'Logo.svg' | asset_url }}" alt="KICKS" width="28" height="28">
            </div>
            
            <button id="menuToggleMobile" class="hamburger mobile-hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenuMobile">
              <span></span><span></span><span></span>
            </button>
          </div>
          <!-- Mobile Search Bar -->
          <form id="headerSearchMobileHeader" class="search-bar search-bar--mobile-header" action="/search" method="get" role="search" aria-hidden="true">
            <input type="search" name="q" placeholder="Search products" class="search-input" />
          </form>
          
          <!-- Mobile Menu -->
          <div id="mobileMenuMobile" class="mobile-menu mobile-menu--new" aria-hidden="true">
            <nav class="mobile-menu__content" role="navigation">
              <a href="#" class="mobile-link">New Drops ðŸ”¥</a>
              <a href="#" class="mobile-link">Men</a>
              <a href="#" class="mobile-link">Women</a>
              <div class="mobile-icons">
                <img src="{{ 'User.svg' | asset_url }}" alt="User" width="24" height="24">
                <img src="{{ 'Profile.svg' | asset_url }}" alt="Profile" width="24" height="24">
              </div>
            </nav>
          </div>
          
          <!-- Legacy Mobile Menu (kept for fallback) -->
          <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
            <nav class="mobile-menu__content" role="navigation">
              <a href="#" class="mobile-link">New Drops ðŸ”¥</a>
              <a href="#" class="mobile-link">Men</a>
              <a href="#" class="mobile-link">Women</a>
              <div class="mobile-icons">
                <div class="top-header__search mobile-search">
                  <button id="searchToggleMobile" class="search-toggle" aria-expanded="false" aria-controls="headerSearchMobile" aria-label="Open search">
                    <img src="{{ 'Search.svg' | asset_url }}" alt="Search" width="" height="" />
                  </button>
                  <form id="headerSearchMobile" class="search-bar search-bar--mobile" action="/search" method="get" role="search" aria-hidden="true">
                    <input type="search" name="q" placeholder="Search products" class="search-input" />
                  </form>
                  <img src="{{ 'User.svg' | asset_url }}" alt="" width="" height="">
                  <img src="{{ 'Profile.svg' | asset_url }}" alt="" width="" height="">
                </div>
              </div>
            </nav>
          </div>
        </div>
      {% else %}
        <div class="top-header__nav">
          <div class="header-container header-nav__container">
            <div class="header-nav desktop-links">
              <p>New Drops ðŸ”¥</p>
              <div class="nav-items">
                <p>Men</p>
                <img src="{{ 'ArrowDown.svg' | asset_url }}" alt="ArrowDown placeholder" width={} height={}>
              </div>

              <div class="nav-items">
                <p>Women</p>
                <img src="{{ 'ArrowDown.svg' | asset_url }}" alt="ArrowDown placeholder" width={} height={}>
              </div>
            </div>

            <div class="brand">
              <img src="{{ 'Logo.svg' | asset_url }}" alt="KICKS" width={28px} height={28px}>
            </div>

            <div class="header-nav top-header__search desktop-actions">
              <button id="searchToggle" class="search-toggle" aria-expanded="false" aria-controls="headerSearch" aria-label="Open search">
                <img src="{{ 'Search.svg' | asset_url }}" alt="Search" width="" height=""/>
              </button>
              <form id="headerSearch" class="search-bar" action="/search" method="get" role="search" aria-hidden="true">
                <input type="search" name="q" placeholder="Search products" class="search-input" />
              </form>
              <img src="{{ 'User.svg' | asset_url }}" alt="" width="User Icon" height="">
              <img src="{{ 'Profile.svg' | asset_url }}" alt="Profile Icon" width="" height="">
              <button id="menuToggle" class="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
                <span></span><span></span><span></span>
              </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
              <nav class="mobile-menu__content" role="navigation">
                <a href="#" class="mobile-link">New Drops ðŸ”¥</a>
                <a href="#" class="mobile-link">Men</a>
                <a href="#" class="mobile-link">Women</a>
                <div class="mobile-icons">
                  <div class="top-header__search mobile-search">
                    <button id="searchToggleMobile" class="search-toggle" aria-expanded="false" aria-controls="headerSearchMobile" aria-label="Open search">
                      <img src="{{ 'Search.svg' | asset_url }}" alt="Search" width="" height=""/>
                    </button>
                    <form id="headerSearchMobile" class="search-bar search-bar--mobile" action="/search" method="get" role="search" aria-hidden="true">
                      <input type="search" name="q" placeholder="Search products" class="search-input" />
                    </form>
                    <img src="{{ 'User.svg' | asset_url }}" alt="User" width="20" height="20">
                    <img src="{{ 'Profile.svg' | asset_url }}" alt="Profile" width="20" height="20">
                  </div>
                </div>
              </nav>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
  </div>

  <script>
    (function(){
      var nav = document.querySelector('.top-header__nav');
      var toggle = document.getElementById('searchToggle');
      var form = document.getElementById('headerSearch');
      var input = form ? form.querySelector('.search-input') : null;
      var menuToggle = document.getElementById('menuToggle');
      var mobileMenu = document.getElementById('mobileMenu');
      var searchToggleMobile = document.getElementById('searchToggleMobile');
      var formMobile = document.getElementById('headerSearchMobile');
      var inputMobile = formMobile ? formMobile.querySelector('.search-input') : null;
      if(!nav){ return; }
      function closeMenu(){
        if(menuToggle && mobileMenu){
          nav.classList.remove('is-menu-open');
          mobileMenu.setAttribute('aria-hidden','true');
          menuToggle.setAttribute('aria-expanded','false');
        }
      }
      function closeSearch(){
        nav.classList.remove('is-search-open');
        toggle && toggle.setAttribute('aria-expanded','false');
        if(form){ form.setAttribute('aria-hidden','true'); }
        if(searchToggleMobile){ searchToggleMobile.setAttribute('aria-expanded','false'); }
        if(formMobile){ formMobile.setAttribute('aria-hidden','true'); }
      }
      toggle && toggle.addEventListener('click', function(e){
        e.preventDefault();
        var open = nav.classList.toggle('is-search-open');
        toggle.setAttribute('aria-expanded', String(open));
        if(form){ form.setAttribute('aria-hidden', String(!open)); }
        if(open && input){ setTimeout(function(){ input.focus(); }, 50); }
      });
      searchToggleMobile && searchToggleMobile.addEventListener('click', function(e){
        e.preventDefault();
        var open = nav.classList.toggle('is-search-open');
        searchToggleMobile.setAttribute('aria-expanded', String(open));
        if(formMobile){ formMobile.setAttribute('aria-hidden', String(!open)); }
        if(open && inputMobile){ setTimeout(function(){ inputMobile.focus(); }, 50); }
      });
      menuToggle && menuToggle.addEventListener('click', function(e){
        e.preventDefault();
        var open = nav.classList.toggle('is-menu-open');
        menuToggle.setAttribute('aria-expanded', String(open));
        if(mobileMenu){ mobileMenu.setAttribute('aria-hidden', String(!open)); }
      });
      document.addEventListener('keydown', function(ev){ if(ev.key === 'Escape'){ closeSearch(); closeMenu(); }});
      document.addEventListener('click', function(ev){
        if(!nav.classList.contains('is-search-open') && !nav.classList.contains('is-menu-open')) return;
        if(!nav.contains(ev.target)) { closeSearch(); closeMenu(); }
      });
      window.addEventListener('resize', function(){ if(window.innerWidth > 900){ closeMenu(); closeSearch(); }});
    })();
  </script>
</section>

{% schema %}
{
  "name": "Header Image",
  "settings": [
    {"type": "image_picker", "id": "header_image", "label": "Header image"},
    {"type": "text", "id": "alt_text", "label": "Alt text", "default": "Site header banner"}
  ],
  "presets": [{"name": "Header Image"}]
}
{% endschema %}
